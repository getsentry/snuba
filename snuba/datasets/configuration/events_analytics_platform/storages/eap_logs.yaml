version: v1
kind: readable_storage
name: eap_logs

storage:
  key: eap_logs
  set_key: events_analytics_platform

readiness_state: partial

schema:
  columns:
    [
      { name: organization_id, type: UInt, args: { size: 64 } },
      { name: project_id, type: UInt, args: { size: 64 } },
      { name: timestamp, type: DateTime },
      { name: origin, type: String },
      { name: hostname, type: String },
      { name: message, type: String },
      { name: attr_str, type: Map, args: { key: { type: String }, value: { type: String } } },
      { name: attr_num, type: Map, args: { key: { type: String }, value: { type: Float, args: { size: 64 } } } },
    ]
  local_table_name: eap_logs_local
  dist_table_name: eap_logs_dist
  partition_format: [date]


mandatory_condition_checkers:
  - condition: OrgIdEnforcer
    args:
      field_name: organization_id
