Search.setIndex({"docnames": ["architecture/consumer", "architecture/datamodel", "architecture/overview", "architecture/queryprocessing", "architecture/slicing", "clickhouse/schema_design", "clickhouse/supported_versions", "clickhouse/topology", "configuration/dataset", "configuration/entity", "configuration/entity_subscription", "configuration/intro", "configuration/migration_group", "configuration/overview", "configuration/readable_storage", "configuration/writable_storage", "contributing/environment", "getstarted", "index", "intro", "language/mql", "language/snql", "migrations/modes", "profiler", "query/overview"], "filenames": ["architecture/consumer.rst", "architecture/datamodel.rst", "architecture/overview.rst", "architecture/queryprocessing.rst", "architecture/slicing.rst", "clickhouse/schema_design.rst", "clickhouse/supported_versions.rst", "clickhouse/topology.rst", "configuration/dataset.md", "configuration/entity.md", "configuration/entity_subscription.md", "configuration/intro.rst", "configuration/migration_group.md", "configuration/overview.rst", "configuration/readable_storage.md", "configuration/writable_storage.md", "contributing/environment.rst", "getstarted.rst", "index.rst", "intro.rst", "language/mql.rst", "language/snql.rst", "migrations/modes.rst", "profiler.rst", "query/overview.rst"], "titles": ["Snuba Consumers", "Snuba Data Model", "Snuba Architecture Overview", "Snuba Query Processing", "Snuba Data Slicing (under development)", "ClickHouse Schema Design Best Practices", "ClickHouse supported versions", "ClickHouse Topology Best Practices", "Dataset Schema", "Entity Schema", "Entity Subscription Schema", "Dataset Configuration", "Migration Group Schema", "Dataset Configuration", "Readable Storage Schema", "Writable Storage Schema", "Snuba development environment", "Getting started with Snuba", "Features:", "Features:", "The MQL query language", "The SnQL query language", "Snuba Migration Modes", "Profiling", "Querying Snuba"], "terms": {"i": [0, 1, 2, 3, 4, 5, 6, 7, 9, 12, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24], "still": [0, 2, 5, 9, 24], "easiest": 0, "wai": [0, 1, 2, 3, 7, 17, 20, 22, 23, 24], "deploi": [0, 2, 7], "new": [0, 3, 4, 5, 6, 7, 14, 15, 22, 23], "dataset": [0, 2, 4, 5, 7, 18, 21, 24], "can": [0, 1, 2, 3, 4, 5, 7, 9, 14, 15, 18, 19, 20, 21, 22, 23, 24], "written": [0, 2, 3, 7, 17], "us": [0, 1, 2, 3, 4, 6, 7, 9, 14, 15, 16, 17, 20, 21, 22, 23, 24], "serv": [0, 1, 2, 3, 5, 14, 15, 20], "need": [0, 1, 2, 3, 4, 15, 16, 22, 24], "high": [0, 5], "throughput": 0, "sidestep": 0, "all": [0, 1, 3, 5, 16, 18, 19, 20, 21, 22, 24], "problem": 0, "concurr": [0, 24], "For": [0, 3, 4, 7, 15, 20, 21, 23, 24], "an": [0, 1, 2, 3, 4, 5, 7, 9, 15, 16, 21, 24], "experi": [0, 5, 17], "attempt": 0, "consolid": 0, "both": [0, 1, 2, 3, 5, 18, 19], "logic": [0, 1, 5, 9, 18, 19], "so": [0, 1, 2, 5, 16, 21, 22, 23, 24], "we": [0, 1, 2, 3, 4, 5, 7, 15, 21, 22, 24], "eventu": [0, 1, 2], "remov": [0, 5, 14, 15, 24], "code": [0, 3, 21, 24], "beneath": 0, "It": [0, 1, 2, 5, 16, 21, 24], "anywher": 0, "prod": [0, 20], "In": [0, 1, 2, 3, 4, 5, 16, 20, 21, 22, 24], "order": [0, 2, 3, 4, 5, 16, 20, 22, 24], "port": [0, 17], "fulli": [0, 2, 22], "regist": [0, 2, 5], "rust_snuba": [0, 16], "src": 0, "mod": 0, "r": [0, 16], "add": [0, 4, 15, 17, 21], "test_message_processor": 0, "py": [0, 17, 22], "later": 0, "rustcompatprocessor": 0, "get": [0, 5, 16, 18], "rid": 0, "implement": [0, 3], "each": [0, 1, 3, 4, 5, 17, 21, 24], "storag": [0, 5, 9, 13, 17, 21, 22, 24], "defin": [0, 1, 3, 11, 13, 14, 15, 21, 24], "convers": 0, "function": [0, 3, 6, 9, 16, 18, 19, 20, 21, 24], "map": [0, 1, 5, 9, 14, 15], "layout": 0, "kafka": [0, 2, 15, 16, 17, 18, 19], "list": [0, 1, 6, 14, 15, 17, 24], "clickhous": [0, 1, 2, 3, 9, 14, 15, 16, 17, 18, 19, 20, 21, 22, 24], "row": [0, 1, 2, 5, 14, 15, 20, 21, 24], "ar": [0, 1, 2, 3, 4, 5, 6, 7, 9, 10, 11, 13, 15, 16, 17, 20, 21, 22, 23, 24], "subclass": 0, "from": [0, 1, 2, 3, 4, 5, 7, 9, 14, 15, 16, 17, 18, 19, 20, 21, 24], "datasetmessageprocessor": 0, "just": [0, 1, 5, 23, 24], "name": [0, 1, 3, 4, 5, 7, 8, 9, 10, 12, 14, 15, 23, 24], "becom": [0, 24], "avail": [0, 14, 15, 16], "refer": [0, 7, 16, 21, 24], "configur": [0, 16, 18, 22], "yaml": [0, 4, 11, 13], "run": [0, 1, 2, 3, 5, 14, 15, 17, 22, 24], "mention": [0, 5, 22], "abov": [0, 1, 3, 4, 5, 7, 20, 22, 24], "convert": [0, 15], "batch": [0, 2], "those": [0, 5, 18, 19], "up": [0, 2, 3, 4, 5, 7, 16, 17, 22], "larger": [0, 24], "insert": [0, 2, 15], "statement": [0, 1, 15], "send": [0, 20, 21, 23], "off": [0, 22], "cluster": [0, 14, 15, 17, 22], "set": [0, 1, 3, 4, 5, 9, 14, 15, 16, 18, 19, 20, 21, 22, 23, 24], "sentri": [0, 1, 4, 5, 7, 22, 23], "have": [0, 1, 2, 3, 4, 5, 6, 15, 16, 23, 24], "lot": 0, "want": [0, 5, 16, 21, 22], "certain": [0, 5], "requir": [0, 1, 2, 3, 4, 5, 9, 14, 15, 20, 21], "our": [0, 2, 3, 21], "t": [0, 1, 2, 5, 14, 15, 21], "meet": 0, "which": [0, 1, 2, 3, 5, 9, 14, 15, 16, 18, 19, 20, 21, 22, 24], "don": [0, 1, 5], "appli": [0, 3, 9, 12, 14, 15, 18, 19, 21, 24], "product": [0, 1, 2, 3, 7, 23], "thei": [0, 1, 2, 3, 5, 7, 20, 21, 22], "strong": [0, 1, 2], "consist": [0, 3, 21, 24], "hand": [0, 21], "queri": [0, 1, 4, 9, 14, 15, 16, 18, 19], "assert": 0, "few": [0, 3, 7, 23], "wait": 0, "them": [0, 1, 3, 5, 24], "some": [0, 1, 2, 3, 5, 6, 21, 23], "more": [0, 1, 2, 5, 6, 7, 20, 21, 22, 24], "depend": [0, 1, 2, 3, 5, 15, 16, 21, 22], "data": [0, 3, 7, 16, 17, 18, 19, 21, 22], "becaus": [0, 2, 5, 21], "everi": [0, 1, 4, 5, 21, 23, 24], "synchron": [0, 2, 15], "latenc": 0, "realli": 0, "import": [0, 24], "while": [0, 2, 3, 5], "isn": [0, 21], "basic": [0, 3], "peopl": 0, "write": [0, 2, 3, 4, 5, 15, 24], "e2": 0, "involv": [0, 24], "similarli": 0, "how": [0, 1, 4, 5, 9, 16, 20, 21, 24], "relat": [0, 1, 2, 3, 18, 19, 24], "db": [0, 1], "django": 0, "orm": 0, "being": [0, 3, 5, 24], "wipe": 0, "http": [0, 2, 16, 24], "well": [0, 2, 3, 5, 18, 19], "web": 0, "view": [0, 1, 2, 3, 5, 9], "prefix": [0, 5], "same": [0, 1, 3, 4, 14, 15, 21, 22, 24], "": [0, 1, 4, 5, 6, 15, 16, 20, 21, 22, 23, 24], "One": [0, 1], "request": 0, "directli": [0, 7, 18, 19, 21, 24], "translat": [0, 9], "block": [0, 1], "toward": [0, 1], "come": 0, "two": [0, 1, 2, 3, 5, 7, 9, 20, 21, 22, 23], "flavor": 0, "find": [0, 3, 21], "load": [0, 1, 2, 3, 5, 11, 13, 24], "version": [0, 5, 8, 9, 10, 12, 14, 15, 16, 18, 21, 24], "There": [0, 1, 2, 5, 6, 14, 15, 21, 24], "class": [0, 1, 3, 9, 14, 15, 20, 24], "like": [0, 1, 3, 18, 19, 21, 23, 24], "querylogprocessor": 0, "relev": [0, 2, 4, 5, 24], "If": [0, 2, 14, 15, 16, 21, 22], "exist": [0, 2, 3, 4, 5, 7, 24], "The": [0, 1, 2, 3, 4, 5, 6, 9, 14, 15, 16, 17, 18, 19, 22, 24], "result": [0, 2, 4, 5, 15, 20, 21, 24], "sometim": 0, "20x": 0, "faster": [0, 3, 5], "than": [0, 21], "found": [0, 17, 20, 21, 22, 24], "silent": 0, "fall": [0, 24], "back": [0, 1, 2], "second": [0, 5, 15, 20, 21, 23, 24], "within": [0, 18], "thi": [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 14, 15, 16, 17, 18, 19, 20, 21, 22, 24], "mode": [0, 2, 15, 18, 24], "specif": [0, 1, 2, 3, 5, 9, 14, 15, 18, 19, 21, 22, 23, 24], "ha": [0, 1, 2, 3, 5, 6, 7, 18, 19, 20, 23, 24], "time": [0, 1, 2, 3, 5, 9, 14, 15, 16, 17, 18, 19, 20, 21, 23, 24], "perform": [0, 1, 2, 3, 5, 9, 16, 18, 19], "benefit": [0, 5], "neglig": 0, "even": [0, 1, 21], "when": [0, 1, 2, 4, 5, 6, 9, 21, 22, 24], "process": [0, 2, 16, 18, 24], "100": [0, 20, 23, 24], "e": [0, 15, 20, 21, 24], "api": [0, 2, 5, 7, 16, 23, 24], "purpos": [0, 20, 22], "baseclass": 0, "deleg": [0, 7], "mean": [0, 5, 20, 24], "connect": [0, 1, 22, 24], "multiprocess": 0, "make": [0, 3, 4, 5, 16, 22, 24], "sens": [0, 5], "roundtrip": 0, "through": [0, 1, 2, 5, 11, 13, 18, 19, 21], "onli": [0, 1, 2, 3, 5, 14, 15, 21, 22, 23, 24], "call": [0, 2, 5, 23, 24], "busi": 0, "again": 0, "valid": [0, 1, 4, 5, 6, 9, 11, 13, 14, 15, 21, 24], "equival": [0, 3, 9, 21], "where": [0, 1, 3, 4, 5, 14, 15, 18, 19, 24], "payload": [0, 24], "schema": [0, 1, 3, 4, 18, 24], "against": [0, 1, 5, 14, 15], "miss": [0, 24], "coverag": 0, "prefer": [0, 3], "custom": [0, 3, 4, 5, 20], "replac": [0, 2, 3, 4, 14, 15, 18, 19, 24], "case": [0, 1, 2, 3, 4, 5, 20, 21, 24], "around": [0, 20, 24], "gil": 0, "arroyo": 0, "support": [0, 1, 2, 3, 4, 14, 15, 18, 19, 20, 21, 22], "abl": [0, 1, 24], "multipl": [0, 1, 2, 3, 4, 5, 18, 19, 21, 23], "core": [0, 20], "signific": 0, "serial": 0, "overhead": [0, 23], "amount": [0, 5, 15, 23], "complex": [0, 1, 3, 20], "out": [0, 4, 14, 15, 16, 22], "scope": [0, 24], "document": [0, 5, 20, 21, 22, 24], "despit": 0, "launch": 0, "cli": 0, "work": [0, 1, 2, 3, 5, 6, 18, 21, 22], "compil": 0, "share": [0, 1, 2], "librari": 0, "expos": [0, 1, 14, 15, 21], "packag": [0, 16], "maturin": 0, "wheel": 0, "pars": [0, 3], "argument": [0, 15], "resolv": [0, 5], "config": [0, 4, 9, 14, 15, 22, 23], "build": [0, 1, 4, 6, 16, 24], "json": [0, 3, 21], "contain": [0, 1, 2, 3, 5, 7, 14, 15, 16, 20, 21, 22, 24], "inform": [0, 20, 22], "physic": [0, 1], "topic": [0, 1, 2, 15], "tabl": [0, 1, 2, 3, 9, 14, 15, 17, 22, 24], "point": [0, 1, 2, 4, 18, 19, 22], "take": [0, 3, 5, 21, 22, 24], "over": [0, 1, 5, 18, 19], "entir": [0, 3, 5, 21], "model": [0, 2, 3, 5, 18, 19, 21, 22], "veri": [0, 2, 3, 5, 24], "simpl": [0, 1, 21], "tokio": 0, "runtim": [0, 23], "re": 0, "regular": [0, 4, 5, 18], "o": 0, "thread": [0, 23, 24], "irrelev": 0, "sinc": [0, 1, 2, 18, 19, 23], "mostli": 0, "main": [0, 1, 2, 3, 22, 23], "differ": [0, 1, 2, 3, 4, 5, 6, 7, 9, 14, 15, 21], "progress": [0, 5], "fundament": [0, 1], "subject": [0, 4, 5], "therefor": 0, "forc": [0, 2, 22, 24], "spawn": 0, "subprocess": 0, "ipc": 0, "one": [0, 1, 2, 3, 4, 5, 7, 9, 14, 15, 16, 20, 21, 22, 23, 24], "other": [0, 1, 3, 5, 7, 21, 24], "interpret": 0, "alreadi": [0, 16, 22, 24], "initi": 0, "doe": [0, 1, 2, 3, 5, 16, 24], "except": [0, 2, 3, 21, 24], "signal": 0, "handl": 0, "bit": [0, 5], "tricki": 0, "major": 0, "lifetim": 0, "handler": 0, "cannot": [0, 1, 4, 5, 24], "also": [0, 1, 2, 3, 17, 20, 21, 22, 23, 24], "its": [0, 1, 2, 3, 5, 21, 22], "own": [0, 1, 2, 6, 23], "ctrl": 0, "c": 0, "do": [0, 1, 3, 4, 5, 7, 16, 21], "complet": [0, 14, 15, 16, 24], "ignor": 0, "fine": 0, "keyboardinterrupt": 0, "section": [1, 2, 3, 5, 16, 24], "explain": [1, 2, 3, 16, 24], "organ": [1, 2, 20], "user": [1, 3, 5, 7, 22, 24], "face": 1, "underli": [1, 5, 21], "databas": [1, 2, 4, 7, 18, 19, 21], "divid": [1, 3, 24], "horizont": 1, "what": [1, 3, 5, 15, 20, 24], "visibl": [1, 24], "client": [1, 2, 17, 18, 19, 24], "languag": [1, 2, 3, 18, 19, 24], "element": [1, 5, 24], "mai": [1, 4, 5, 17, 24], "1": [1, 4, 5, 16, 17, 20, 21, 22, 24], "instead": [1, 16, 20], "concept": [1, 7], "reason": [1, 3, 14, 15, 16], "behind": 1, "divis": 1, "allow": [1, 2, 3, 7, 10, 14, 15, 18, 19, 24], "stabl": [1, 6], "interfac": [1, 3], "intern": [1, 14, 15, 24], "execut": [1, 2, 3, 15, 24], "part": [1, 3, 5, 9, 21, 23, 24], "improv": 1, "transpar": 1, "rest": 1, "outlin": [1, 22], "compos": [1, 3, 20], "describ": [1, 2, 3, 5, 20, 21, 24], "below": [1, 2, 21, 24], "A": [1, 2, 4, 5, 9, 14, 15, 17, 21, 24], "space": 1, "provid": [1, 2, 3, 5, 9, 15, 17, 18, 19, 20, 21, 24], "independ": [1, 2, 3, 5], "term": [1, 2], "discov": [1, 18, 19, 24], "outcom": [1, 18, 19], "session": [1, 18, 19, 20], "seen": 1, "compon": [1, 3, 8, 9, 10, 12, 14, 15], "abstract": [1, 9], "concret": 1, "target": 1, "extens": 1, "repres": [1, 2, 3, 9, 14, 15, 20, 21, 24], "instanc": [1, 4, 17], "transact": [1, 3, 18, 20, 21, 24], "error": [1, 3, 14, 15, 18, 19, 21, 24], "practic": [1, 18], "correspond": [1, 4, 21, 22], "field": [1, 4, 5, 15, 20, 21, 24], "associ": [1, 4, 8, 9], "sever": [1, 3, 5, 18, 19, 24], "No": [1, 2], "lower": 1, "level": [1, 5, 9], "suppos": [1, 3], "unequivoc": 1, "present": [1, 5, 24], "mimic": 1, "foreign": 1, "kei": [1, 3, 4, 5, 9, 14, 15, 21, 24], "meant": 1, "mani": 1, "inherit": 1, "nomin": 1, "subtyp": 1, "group": [1, 13, 20, 21, 24], "parent": 1, "semant": [1, 2, 3], "must": [1, 2, 4, 5, 14, 15, 21, 22], "union": 1, "whose": [1, 24], "possibl": [1, 2, 3, 21, 23, 24], "largest": 1, "unit": [1, 16], "guarante": [1, 2, 6, 24], "expect": [1, 5, 22], "serializ": 1, "pleas": [1, 5, 16], "serious": 1, "you": [1, 2, 4, 5, 7, 16, 17, 21, 22, 23, 24], "think": 1, "probabl": 1, "extend": 1, "ani": [1, 2, 3, 6, 14, 15, 20, 21, 24], "span": [1, 4], "best": [1, 18, 22], "impact": [1, 5, 14, 15], "subscript": [1, 2, 3, 9, 13, 15], "These": [1, 2, 3, 4, 11, 13, 16, 20, 21, 22], "otherwis": [1, 17, 20], "would": [1, 3, 21, 24], "To": [1, 3, 4, 5, 23], "precis": 1, "smaller": 1, "ingest": [1, 5, 15, 16, 18, 19], "partit": [1, 2, 9, 14, 15], "project_id": [1, 3, 20, 21, 24], "maximum": [1, 10, 15], "detail": [1, 2, 4, 20, 21, 22, 24], "ok": 1, "guid": [1, 17, 24], "materi": [1, 2, 3], "As": [1, 3, 5, 24], "consequ": 1, "reflect": [1, 3], "gener": [1, 2, 4, 5, 7, 22, 24], "ddl": [1, 18, 19], "discuss": [1, 2, 3, 5, 24], "thu": 1, "least": [1, 2], "readabl": [1, 9, 13], "pre": [1, 3, 5, 18, 19, 24], "aggreg": [1, 3, 7, 10, 18, 19, 20, 21, 24], "per": [1, 4, 14, 15, 17, 20, 24], "optim": [1, 15, 18, 19], "writabl": [1, 9, 13], "fill": [1, 2, 15], "exclus": 1, "real": [1, 2], "world": 1, "studi": 1, "necessarili": 1, "current": [1, 18, 19, 20, 21, 22], "nor": 1, "deploy": [1, 18, 23], "consid": [1, 7], "taken": [1, 2], "isol": 1, "look": [1, 3, 5, 21, 22, 24], "actual": [1, 5, 20, 21, 24], "april": 1, "2020": 1, "though": [1, 24], "design": [1, 3, 18], "should": [1, 3, 4, 5, 9, 14, 15, 17, 20, 21, 22, 23, 24], "move": [1, 5, 22], "individu": [1, 3], "raw": [1, 4, 5, 17], "painfulli": 1, "slow": 1, "comput": 1, "hourli": 1, "much": [1, 5, 18, 19], "effici": [1, 5], "planner": 1, "pick": [1, 3, 23, 24], "canon": [1, 5], "three": [1, 4, 21], "event": [1, 2, 3, 5, 15, 18, 19, 21, 24], "form": [1, 3, 4, 9, 18, 19, 21], "give": [1, 3, 5, 21], "common": [1, 3, 5, 24], "read": [1, 2, 4, 5, 9, 14, 15], "put": [1, 5], "less": [1, 5, 24], "clickhosu": 1, "offer": 1, "merg": [1, 2, 24], "essenti": [1, 2], "includ": [1, 3, 5, 15, 16, 21, 24], "togeth": [1, 18, 19], "groupedmessag": [1, 21, 24], "groupassinge": 1, "left": [1, 9, 21, 24], "similar": [1, 2, 3, 5, 17, 18, 19, 24], "wa": [1, 2, 3, 18, 19, 24], "previou": [1, 3], "seri": [2, 3, 18, 19], "orient": 2, "store": [2, 5, 7, 18, 19, 20], "columnari": 2, "distribut": [2, 5, 14, 15, 17, 18, 19, 21], "suit": [2, 16], "kind": [2, 5, 8, 9, 10, 12, 14, 15], "input": [2, 5], "stream": [2, 15, 18, 19], "todai": 2, "either": [2, 9, 21, 24], "chosen": 2, "good": [2, 5], "balanc": [2, 24], "replic": [2, 7, 24], "natur": 2, "flexibl": [2, 5], "engin": [2, 3, 7], "goal": [2, 3], "endpoint": [2, 17, 21], "debug": [2, 21, 24], "consum": [2, 5, 7, 15, 16, 18, 19, 23, 24], "onto": [2, 3], "most": [2, 3, 7, 16, 18, 19, 24], "effect": 2, "especi": 2, "pass": [2, 3], "onc": [2, 5, 22, 23, 24], "By": 2, "properli": [2, 4, 22, 24], "select": [2, 3, 9, 17, 23, 24], "dedupl": 2, "achiev": [2, 24], "exactli": [2, 21], "accept": [2, 16, 24], "simplest": 2, "system": [2, 3, 5, 18, 19, 24], "express": [2, 5, 9, 21], "snql": [2, 18, 19], "mql": [2, 18], "sent": [2, 21, 23, 24], "post": [2, 24], "transform": [2, 3, 5, 9, 14, 15], "done": [2, 4, 5, 22], "receiv": [2, 3, 24], "push": 2, "Then": 2, "updat": [2, 5, 6, 15], "period": [2, 5], "produc": [2, 3, 5, 21], "coexist": 2, "default": [2, 4, 17, 20, 21, 22, 24], "monoton": 2, "multi": [2, 21, 22], "leader": 2, "hit": [2, 24], "replica": [2, 3, 22], "date": 2, "reach": 2, "state": [2, 14, 15], "befor": [2, 3, 15, 21], "final": [2, 14, 15, 22, 24], "keyword": [2, 21], "singl": [2, 14, 15, 18, 19, 20, 21, 24], "sequenti": [2, 24], "role": 2, "plai": 2, "show": 2, "stand": 2, "alon": 2, "won": 2, "legend": 2, "top": [2, 5, 18, 19], "diagram": [2, 7], "illustr": 2, "entiti": [2, 3, 4, 8, 13, 20, 21, 24], "issu": [2, 3, 5, 17, 18, 19, 24], "featur": [2, 4], "whole": 2, "between": [2, 3, 5, 7, 21, 22], "feed": 2, "messag": [2, 3, 5, 15, 23, 24], "upon": 2, "commit": [2, 4, 15], "record": [2, 4, 24], "log": [2, 4, 9, 15], "alert": 2, "proce": 2, "lockstep": 2, "ident": 2, "addit": [2, 3, 14, 15, 24], "step": [2, 3, 5, 16, 24], "mutat": 2, "unmerg": 2, "reprocess": 2, "etc": [2, 5, 21], "forward": [2, 22], "project": [2, 20, 21, 24], "id": [2, 4, 20, 21, 24], "simpler": [2, 24], "power": [2, 18, 19], "releas": [2, 14, 15, 18, 19], "health": 2, "mainli": [2, 3], "stat": [2, 18, 19, 24], "page": [2, 18, 19], "under": [2, 18], "construct": [2, 5], "cdc": 2, "start": [3, 14, 15, 16, 18, 22, 23, 24], "ast": 3, "ands": 3, "sql": [3, 5, 18, 19, 21, 24], "prevent": [3, 24], "danger": 3, "infrastructur": 3, "focus": [3, 24], "ensur": [3, 4, 14, 15, 16, 22], "match": [3, 5, 9, 24], "promot": 3, "tag": [3, 20], "introduct": [3, 24], "pointer": 3, "exampl": [3, 4, 5, 21, 22, 23, 24], "base": [3, 4, 18, 19, 20, 21, 24], "With": [3, 21], "chang": [3, 4, 5, 17, 18, 19, 22], "whether": [3, 20], "structur": [3, 4, 5, 21, 24], "here": [3, 4, 5, 14, 15, 16, 18, 19, 20, 21, 22], "modul": [3, 24], "yet": [3, 22], "catch": 3, "invalid": [3, 24], "respons": [3, 9, 14, 15, 21], "return": [3, 5, 20, 21, 24], "http400": 3, "proper": 3, "sub": 3, "check": [3, 14, 15], "right": [3, 5, 9, 21, 22, 24], "after": [3, 5, 21, 24], "happen": [3, 4, 21], "alia": [3, 21], "shadow": 3, "signatur": 3, "column": [3, 4, 9, 14, 15, 21, 24], "reject": 3, "condit": [3, 5, 14, 15, 21, 24], "rang": [3, 4, 21, 24], "stateless": 3, "object": [3, 9, 14, 15, 20, 24], "place": [3, 5, 22], "sequenc": [3, 7, 9], "apdex": [3, 20], "bucket": [3, 20, 21], "respond": [3, 24], "At": 3, "end": [3, 5, 24], "inspect": 3, "appropri": 3, "rout": [3, 4], "node": [3, 4, 5, 14, 15, 18, 19, 21, 24], "reduc": 3, "notabl": 3, "abc": 3, "access": [3, 5, 17, 18, 19, 24], "valu": [3, 4, 5, 9, 14, 15, 20, 21, 22, 23, 24], "indexof": 3, "been": [3, 5, 6, 24], "rule": [3, 9, 18, 19], "contrarili": [3, 24], "full": [3, 5, 20], "context": [3, 5, 17], "u": [3, 7, 24], "easili": 3, "reus": 3, "across": [3, 4, 5, 20, 21], "compar": [3, 21], "Their": 3, "oper": [3, 5, 20, 21], "equal": [3, 4, 24], "hashmap": 3, "bloom": 3, "filter": [3, 14, 15, 20, 21, 24], "index": 3, "simpli": [3, 4], "format": [3, 7, 14, 15], "string": [3, 8, 9, 10, 12, 14, 15, 20, 21, 24], "ones": [3, 21], "follow": [3, 4, 5, 6, 7, 16, 17, 22, 24], "slightli": 3, "path": 3, "account": [3, 5, 15], "multipli": 3, "solv": 3, "type": [3, 4, 5, 7, 9, 14, 15, 21, 24], "respect": [3, 20, 21], "creat": [3, 5, 7], "incredibli": 3, "ineffici": 3, "overal": [3, 5], "turn": [3, 22], "semi": 3, "activ": [4, 16], "higher": [4, 18, 19], "volum": [4, 18, 19, 22], "resourc": [4, 14, 15], "redi": [4, 16, 17, 18, 19], "postgr": [4, 18, 19], "assign": [4, 21, 22], "organization_id": 4, "maintain": [4, 24], "logical_partition_map": 4, "futur": [4, 6], "revis": 4, "along": 4, "sliced_storage_set": 4, "incom": [4, 5, 15], "storagesetkei": 4, "slice_id": 4, "pair": [4, 5], "repartit": 4, "increment": 4, "count": [4, 17, 20, 21], "0": [4, 5, 15, 17, 20, 21, 24], "storage_set": 4, "given": [4, 5, 7, 21], "mega": 4, "partial": [4, 14, 15], "resid": 4, "could": [4, 6], "scenario": 4, "now": [4, 5, 22, 24], "usual": 4, "2": [4, 16, 21, 24], "3": [4, 24], "definit": [4, 5], "sliced_clust": 4, "desir": 4, "storage_set_slic": 4, "calcul": 4, "ultim": 4, "destin": [4, 24], "partition_key_column_nam": [4, 9], "properti": [4, 24], "non": [4, 5], "see": [4, 5, 20, 21, 23, 24], "might": [4, 5, 6, 7], "generic_metrics_set": 4, "generic_metrics_distribut": [4, 20], "file": [4, 5, 11, 13, 22], "sliced_kafka_topic_map": 4, "tupl": [4, 9, 21, 24], "logical_topic_nam": 4, "sure": [4, 16, 22], "broker": 4, "sliced_kafka_broker_config": 4, "info": 4, "metric": [4, 20, 24], "broker_config": 4, "note": [4, 5, 17, 21, 22], "boundari": 4, "stop": [4, 5, 16, 23], "first": [4, 5, 24], "your": [4, 5, 6, 16, 22], "extra": [4, 15], "flag": [4, 12, 14, 15], "number": [4, 5, 10, 21, 24], "collect": [5, 14, 15], "scale": [5, 23], "someth": [5, 24], "doesn": [5, 21], "seem": 5, "submit": 5, "pr": 5, "snuba": [5, 6, 7, 11, 13, 18, 19, 20, 21, 23], "columnar": 5, "datastor": 5, "demand": [5, 18], "referenc": [5, 20], "ed": 5, "claus": [5, 10, 14, 15, 21], "abil": 5, "advantag": 5, "tradit": 5, "rdbm": 5, "postgresql": 5, "commonli": 5, "nest": [5, 9, 14, 15], "arrai": [5, 8, 9, 10, 12, 14, 15, 21], "exact": 5, "larg": 5, "NOT": [5, 21], "often": 5, "howev": [5, 20], "substr": 5, "usabl": 5, "attribut": [5, 14, 15, 24], "necessit": 5, "separ": [5, 7, 18, 19, 21, 23, 24], "low": [5, 23], "small": 5, "proport": 5, "break": 5, "style": 5, "neg": 5, "search": [5, 17, 18, 19], "penalti": 5, "unrel": 5, "effort": 5, "made": 5, "avoid": 5, "facilit": 5, "tend": [5, 7], "hash": 5, "uniqu": [5, 14, 15, 21, 24], "stochast": 5, "quickli": [5, 17], "determin": [5, 12, 14, 15, 20, 21, 24], "unbound": 5, "keyspac": 5, "fix": [5, 23], "memori": 5, "fals": [5, 22, 24], "posit": 5, "test": [5, 6, 22], "alwai": [5, 24], "mayb": 5, "occur": 5, "scan": 5, "due": [5, 16], "regex": 5, "dure": [5, 24], "necessari": [5, 22], "old": 5, "goe": 5, "ttl": 5, "processor": [5, 9, 14, 15], "duplic": 5, "automat": [5, 20], "roll": 5, "dimens": 5, "let": 5, "owner": 5, "simplifi": 5, "ll": 5, "sampl": [5, 23, 24], "usag": 5, "offici": 5, "contrari": 5, "trigger": 5, "convent": [5, 7, 21], "widgets_raw_loc": 5, "widgets_raw_dist": 5, "local": [5, 14, 15, 16, 17, 24], "widgets_aggregation_mv": 5, "widgets_aggregated_loc": 5, "widgets_aggregated_dist": 5, "immut": 5, "normal": 5, "behavior": 5, "suffix": [5, 7], "widgets_aggregation_mv_v1": 5, "widgets_aggregation_mv_v2": 5, "next": 5, "discard": 5, "longer": 5, "prior": 5, "continu": 5, "without": [5, 21, 22, 23], "loss": 5, "control": [5, 22], "mv": 5, "last": 5, "plu": 5, "environ": [5, 14, 15, 17, 18, 19, 20, 22, 23], "click_events_raw_loc": 5, "click_dur": 5, "float64": 5, "click": 5, "click_events_aggregation_mv": 5, "quantilesst": 5, "click_events_aggregated_loc": 5, "zero": 5, "surpris": 5, "p90": 5, "p95": 5, "p99": 5, "durat": [5, 20, 21, 23, 24], "confus": 5, "click_events_aggregation_mv_v1": 5, "via": [5, 7, 22, 23], "__init": 5, "py__": 5, "unus": 5, "known": 6, "23": 6, "8": 6, "11": [6, 20, 21, 24], "29": 6, "altin": 6, "clikhous": 6, "outsid": 6, "potenti": 6, "broken": [6, 24], "risk": [6, 23], "plan": 6, "recent": [6, 16], "inher": 7, "intend": 7, "shard": [7, 22], "themselv": 7, "mainten": 7, "invis": 7, "applic": [7, 11, 13], "act": 7, "proxi": 7, "kept": [7, 16], "indefinit": 7, "astut": 7, "notic": 7, "migrat": [7, 13, 18, 19], "_local": 7, "_dist": 7, "distinguish": 7, "mergetre": 7, "deriv": 7, "hopefulli": 7, "combin": [7, 18, 19, 20, 21], "understand": [7, 24], "quick": [7, 17], "conta": [9, 14, 15], "arg": [9, 14, 15], "mapper": 9, "is_writ": 9, "boolean": [9, 12, 14, 15, 21, 22], "mark": 9, "translation_mapp": 9, "instanti": [9, 14, 15], "curried_funct": 9, "join_relationship": 9, "join": [9, 21, 24], "relationship": [9, 21, 24], "specifi": [9, 15, 20, 21, 24], "x": 9, "y": 9, "rhs_entiti": 9, "rh": [9, 21], "join_typ": 9, "inner": [9, 21], "track": 9, "storage_selector": 9, "selector": 9, "querystorageselector": 9, "query_processor": [9, 14, 15], "logicalqueryprocessor": 9, "queryprocessor": [9, 14, 15], "validate_data_model": 9, "null": [9, 10, 14, 15, 21, 24], "mismatch": [9, 17], "required_time_column": [9, 14, 15], "slice": [9, 18], "subscription_processor": 9, "subscription_valid": 9, "max_allowed_aggreg": 10, "integ": [10, 14, 15, 21], "disallowed_aggreg": 10, "option": [12, 20, 21], "identifi": [14, 15, 21, 24], "set_kei": [14, 15], "locat": [14, 15], "readiness_st": [14, 15], "readi": [14, 15, 24], "variou": [14, 15], "label": [14, 15], "four": [14, 15], "limit": [14, 15, 24], "deprecr": [14, 15], "ci": [14, 15], "develop": [14, 15, 17, 18, 19, 22], "deprec": [14, 15], "experiment": [14, 15, 22], "local_table_nam": [14, 15], "dist_table_nam": [14, 15], "not_deleted_mandatory_condit": [14, 15], "delet": [14, 15, 24], "eg": [14, 15, 21], "explicitli": [14, 15], "partition_format": [14, 15], "cleanup": [14, 15], "job": [14, 15], "clickhousequeryprocessor": [14, 15], "deletion_set": [14, 15], "is_en": [14, 15], "allowed_column": [14, 15], "max_rows_to_delet": [14, 15], "bulk_delete_onli": [14, 15], "allowed_attributes_by_item_typ": [14, 15], "item_typ": [14, 15], "deletion_processor": [14, 15], "deletionprocessor": [14, 15], "mandatory_condition_check": [14, 15], "conditioncheck": [14, 15], "haven": [14, 15], "secur": [14, 15], "allocation_polici": [14, 15], "allocationpolici": [14, 15], "alloc": [14, 15], "delete_allocation_polici": [14, 15], "stream_load": 15, "loader": 15, "bodi": [15, 21], "default_top": 15, "commit_log_top": 15, "subscription_scheduled_top": 15, "schedul": [15, 24], "subscription_result_top": 15, "subscription_scheduler_mod": 15, "g": [15, 20, 21], "global": 15, "subscription_synchronization_timestamp": 15, "timestamp": [15, 20, 21, 24], "subscription_delay_second": 15, "delai": 15, "ad": [15, 21, 22], "orig_message_t": 15, "typic": 15, "60": [15, 24], "minimum": 15, "120": 15, "replacement_top": 15, "dlq_topic": 15, "dlq": 15, "pre_filt": 15, "streammessagefilt": 15, "replacer_processor": 15, "replacerprocessor": 15, "writer_opt": 15, "sourc": 16, "assum": [16, 17], "dev": 16, "rust": 16, "go": [16, 24], "curl": 16, "proto": 16, "tlsv1": 16, "ssf": 16, "sh": 16, "rustup": 16, "shell": 16, "cargo": 16, "sytem": 16, "manag": 16, "homebrew": 16, "m1": 16, "mac": 16, "ve": 16, "variabl": [16, 22, 23], "export": 16, "cpath": 16, "opt": 16, "library_path": 16, "lib": 16, "clone": 16, "repo": 16, "workspac": 16, "git": 16, "github": 16, "com": 16, "getsentri": 16, "command": [16, 24], "python": [16, 24], "virtual": 16, "cd": 16, "devenv": 16, "sync": 16, "expens": 16, "watch": 16, "rebuild": 16, "capabl": 16, "devserv": 16, "integr": 16, "docker": [16, 17, 22], "p": 16, "grep": 16, "server": [16, 17, 22], "checkout": 16, "branch": 16, "venv": 16, "bin": 16, "anoth": [16, 21], "termin": 16, "master": 16, "pull": 16, "devservic": [16, 17, 22], "bring": 16, "clickhouse_host": 17, "127": [17, 24], "redis_host": 17, "On": [17, 18], "6379": 17, "9092": 17, "servic": [17, 18, 19], "line": [17, 24], "conf": [17, 22], "sentry_eventstream": 17, "eventstream": 17, "kafkaeventstream": 17, "And": 17, "exclud": 17, "everyth": [17, 21], "utc": 17, "timezon": 17, "sentry_search": 17, "eventsdatasetsnubasearchbackend": 17, "sentry_tsdb": 17, "tsdb": 17, "redissnuba": 17, "redissnubatsdb": 17, "snubaeventstream": 17, "psql": 17, "exec": 17, "sentry_clickhous": 17, "sentry_loc": 17, "hostnam": [17, 23], "v": 17, "host": 17, "rich": [18, 19], "fast": [18, 19], "origin": [18, 19], "evolv": [18, 19], "layer": [18, 19], "graph": [18, 19, 21], "instal": [18, 19], "monitor": [18, 19], "architectur": 18, "overview": 18, "topologi": 18, "profil": [18, 24], "grammar": 20, "sdk": [20, 24], "repositori": 20, "timeseri": [20, 24], "metric_nam": 20, "mri": 20, "sum": [20, 24], "quantil": 20, "99": 20, "d": 20, "tagkei": 20, "tagvalu": 20, "status_cod": 20, "arithmet": [20, 21], "arithmetic_op": 20, "function_nam": 20, "paramet": [20, 24], "max": [20, 21], "measur": 20, "fcp": 20, "300": 20, "formula": [20, 24], "almost": 20, "200": [20, 24], "failur": 20, "rate": [20, 21, 23, 24], "about": [20, 24], "That": 20, "why": 20, "mql_context": 20, "dictionari": [20, 24], "2023": [20, 24], "01": [20, 21], "02t03": 20, "04": 20, "05": [20, 24], "00": [20, 21, 24], "16t03": 20, "orderbi": 20, "none": [20, 24], "granular": [20, 24], "3600": [20, 21, 24], "interv": [20, 24], "with_tot": 20, "org_id": [20, 24], "use_case_id": [20, 24], "5": [20, 24], "indexer_map": 20, "conveni": 20, "iso": 20, "8601": 20, "metricsqueri": [20, 24], "1000": [20, 21, 24], "total": [20, 24], "alongsid": [20, 24], "infer": [20, 24], "align": 20, "subqueri": 21, "AND": [21, 24], "OR": 21, "asc": 21, "desc": 21, "n": 21, "encod": 21, "bool": 21, "turbo": [21, 24], "impli": 21, "url": [21, 24], "pattern": 21, "subgraph": 21, "Or": 21, "profile_chunk": [21, 24], "insid": 21, "curli": 21, "brace": 21, "entireti": 21, "anyth": 21, "outer": 21, "alias": 21, "avg": 21, "AS": [21, 24], "avg_d": 21, "direct": 21, "short": 21, "comma": [21, 23], "groupassigne": [21, 24], "tot": 21, "user_id": 21, "somebodi": 21, "hard": 21, "safe": 21, "10": [21, 24], "20": 21, "output": 21, "treat": 21, "noth": 21, "empti": 21, "qualifi": 21, "infix": 21, "lh": 21, "op": [21, 24], "liter": [21, 24], "IN": [21, 24], "mandatori": 21, "declar": [21, 24], "pretti": 21, "self": 21, "explanatori": 21, "magic": 21, "floor": 21, "minut": 21, "hour": 21, "dai": [21, 24], "timeseriesprocessor": 21, "event_id": [21, 24], "event_count": 21, "todatetim": [21, 24], "2022": 21, "15t00": 21, "000000": 21, "21t00": 21, "true": [21, 22], "float": 21, "percentag": 21, "greater": 21, "try": 22, "moment": 22, "switch": 22, "live": 22, "envrion": 22, "sentry_distributed_clickhouse_t": 22, "whenev": 22, "alter": 22, "zookeep": 22, "link": 22, "immedi": [22, 24], "snuba_set": 22, "captur": 23, "enabl": 23, "admin": 23, "who": 23, "snuba_profiles_sample_r": 23, "nonzero": 23, "querylog": 23, "misbehav": 23, "pod": 23, "pod_nam": 23, "6d95f9c8d9": 23, "4cqht": 23, "unknown": 23, "minim": [23, 24], "size": 23, "backlog": 23, "ondemand_profiler_hostnam": 23, "quot": 23, "unset": 23, "warn": 23, "sai": [23, 24], "ondemand": 23, "cap": 23, "30": 23, "forev": 23, "drive": 24, "author": 24, "architect": 24, "know": 24, "interest": 24, "offset": 24, "uint64": 24, "record_delet": 24, "uint8": 24, "statu": 24, "nullabl": 24, "last_seen": 24, "datetim": 24, "first_seen": 24, "active_at": 24, "first_release_id": 24, "group_id": 24, "titl": 24, "uniq": 24, "uniq_ev": 24, "groupbi": 24, "gt": 24, "2021": 24, "chunk_id": 24, "start_timestamp": 24, "end_timestamp": 24, "lt": 24, "arithmeticoper": 24, "public_nam": 24, "timedelta": 24, "14": 24, "rollup": 24, "metricsscop": 24, "wasi": 24, "recommend": 24, "care": 24, "cach": 24, "retri": 24, "bulk": 24, "method": 24, "metadata": 24, "bad": 24, "meta": 24, "1218": 24, "sorri": 24, "screenshot": 24, "exhaust": 24, "statist": 24, "in_ord": 24, "turbo_sample_r": 24, "correct": 24, "4": 24, "success": 24, "400": 24, "500": 24, "timeout": 24, "advanc": 24, "429": 24, "1621038379": 24, "duration_m": 24, "95": 24, "marks_m": 24, "cache_get": 24, "cache_set": 24, "39": 24, "get_config": 24, "prepare_queri": 24, "rate_limit": 24, "validate_schema": 24, "34": 24, "clickhouse_t": 24, "errors_loc": 24, "referr": 24, "project_r": 24, "project_concurr": 24, "global_r": 24, "global_concurr": 24, "result_row": 24, "result_col": 24, "query_id": 24, "f09f3f9e1c632f395792c6a4bfe7c4f": 24, "_snuba_titl": 24, "prewher": 24, "_snuba_project_id": 24, "greaterorequ": 24, "_snuba_timestamp": 24, "01t00": 24, "univers": 24, "11t00": 24, "down": 24, "phase": 24, "tell": 24, "decid": 24, "tree": 24, "awai": 24, "invalid_queri": 24, "16": 24, "42": 24, "time_window": 24, "150": 24, "resolut": 24, "vari": 24, "past": 24, "window": 24, "increas": 24, "task": 24, "executor": 24, "jitter": 24, "jitteredtaskbuild": 24, "defint": 24}, "objects": {}, "objtypes": {}, "objnames": {}, "titleterms": {"snuba": [0, 1, 2, 3, 4, 16, 17, 22, 24], "consum": [0, 4], "summari": 0, "messag": 0, "processor": [0, 3], "python": 0, "test": [0, 16, 24], "endpoint": 0, "rust": 0, "compat": 0, "shim": 0, "architectur": [0, 2], "pure": 0, "hybrid": 0, "data": [1, 2, 4, 5, 24], "model": [1, 24], "dataset": [1, 8, 11, 13], "entiti": [1, 9, 10], "type": 1, "relationship": 1, "between": 1, "consist": [1, 2], "storag": [1, 2, 3, 4, 7, 14, 15], "exampl": 1, "singl": 1, "multi": 1, "join": [1, 3], "overview": 2, "ingest": 2, "queri": [2, 3, 5, 7, 20, 21, 24], "within": 2, "sentri": [2, 16, 17, 18, 19, 24], "deploy": 2, "error": 2, "transact": [2, 23], "flow": 2, "session": 2, "outcom": 2, "chang": 2, "captur": 2, "pipelin": [2, 3], "process": 3, "phase": 3, "legaci": 3, "snql": [3, 21, 24], "parser": 3, "valid": 3, "logic": [3, 4], "selector": 3, "translat": 3, "physic": [3, 4], "formatt": 3, "composit": 3, "subqueri": 3, "gener": 3, "express": 3, "push": 3, "down": 3, "simpl": 3, "optim": 3, "slice": 4, "under": 4, "develop": [4, 16], "configur": [4, 11, 13], "map": 4, "partit": 4, "defin": 4, "clickhous": [4, 5, 6, 7], "cluster": 4, "environ": [4, 16], "prepar": [4, 24], "shard": 4, "ad": 4, "kafka": 4, "topic": 4, "work": 4, "start": [4, 17, 20], "todo": 4, "handl": 4, "subscript": [4, 10, 24], "schedul": 4, "executor": 4, "etc": 4, "schema": [5, 8, 9, 10, 12, 13, 14, 15], "design": 5, "best": [5, 7], "practic": [5, 7], "column": 5, "base": 5, "dictionari": 5, "tag": 5, "promot": 5, "select": [5, 21], "indic": 5, "bloom": 5, "filter": 5, "index": 5, "like": 5, "aggreg": 5, "tabl": [5, 7], "materi": 5, "migrat": [5, 12, 22], "us": [5, 18, 19], "materialization_vers": 5, "support": 6, "version": 6, "topologi": 7, "node": 7, "v": 7, "distribut": [7, 22], "local": [7, 22], "ty": 7, "all": 7, "togeth": 7, "properti": [8, 9, 10, 12, 14, 15], "group": 12, "readabl": 14, "writabl": 15, "prerequisit": 16, "instal": 16, "run": 16, "against": 16, "get": 17, "requir": 17, "set": 17, "featur": [18, 19], "some": [18, 19], "case": [18, 19], "content": 18, "The": [20, 21], "mql": [20, 24], "languag": [20, 21], "end": 20, "limit": [20, 21], "offset": [20, 21], "rollup": 20, "scope": 20, "match": 21, "BY": 21, "where": 21, "have": 21, "order": 21, "granular": 21, "total": 21, "sampl": 21, "mode": 22, "enabl": 22, "profil": 23, "regular": 23, "On": 23, "demand": 23, "explor": 24, "send": 24, "through": 24, "web": 24, "ui": 24, "via": 24, "curl": 24, "request": 24, "respons": 24, "format": 24, "creat": 24}, "envversion": {"sphinx.domains.c": 2, "sphinx.domains.changeset": 1, "sphinx.domains.citation": 1, "sphinx.domains.cpp": 6, "sphinx.domains.index": 1, "sphinx.domains.javascript": 2, "sphinx.domains.math": 2, "sphinx.domains.python": 3, "sphinx.domains.rst": 2, "sphinx.domains.std": 2, "sphinx.ext.intersphinx": 1, "sphinx": 56}})